<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>状态共享</title>
<script src="https://cdn.bootcss.com/vue/2.2.2/vue.min.js"></script>
</head>
<body>
<div id="div1">
  {{ sharedState.message1 }}
  {{ sharedState.message2 }}
  {{ privateState.message3 }}
  {{ privateState.message4 }}
  <button @click="clearMessageAction">清除sharedState.message2</button>
</div>
<hr />
<div id="div2">
  {{ sharedState.message2 }}
  {{ privateState.message3 }}
  <br/>
  <input type="text" v-model="sharedState.message2" name="">
</div>
<script>
var store = {
    debug: true,
    state: {
        message: 'Hello!',
        message1:'div1的内容',
        message2:'div2的内容'
    },
    setMessageAction (newValue) {
        if (this.debug) console.log('setMessageAction triggered with', newValue)
        this.state.message2 = newValue
    },
    clearMessageAction () {
        if (this.debug) console.log('clearMessageAction triggered')
        this.state.message2 = ''
    }
}
var vmA = new Vue({
    el:'#div1',
    data: {
        privateState: {
            message4:'div4的内容'
        },
        sharedState: store.state
    },
    methods: {
        clearMessageAction: store.clearMessageAction.bind(store)
    }
})

var vmB = new Vue({
    el:'#div2',
    data: {
        privateState: {
            message3:'div3的内容'
        },
        sharedState: store.state
    }
})
</script>
</body>
</html>